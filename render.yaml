services:
  # Base de datos PostgreSQL
  - type: db
    name: influencers-db
    databaseName: influencers_82bo
    plan: free

  # Backend FastAPI
  - type: web
    name: influencers-api
    env: docker
    repo: https://github.com/dcastill92/appinfluencers
    dockerfilePath: ./Dockerfile
    plan: free
    healthCheckPath: /health

  # Frontend Next.js
  - type: web
    name: influencers-frontend
    env: next
    repo: https://github.com/dcastill92/appinfluencers
    rootDir: ./frontend 
    plan: free
    buildFilter:
      paths:
      - frontend/**
      
    envVars:
      - key: NEXT_PUBLIC_API_URL
       fromService:
          type: web
          name: influencers-api 
          property: url 
